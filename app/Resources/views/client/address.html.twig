{% extends "front/layout.html.twig" %}

{% block sections %}
    <section id="register_form">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Adresse de Livraison</h2>
                    {{ form_start(form, {'attr': {'class': 'form-horizontal'} })  }}
                    <div class="form-group">
                        <div class="col-lg-10">
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.lastName, {'attr' : {'class' : 'form-control', 'placeholder' : 'Nom du client', 'value' : user.lastName} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.firstName, {'attr' : {'class' : 'form-control', 'placeholder' : 'Prénom du cient', 'value' : user.firstName} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.company, {'attr' : {'class' : 'form-control', 'placeholder' : 'Nom entreprise si existante'} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.address, {'attr' : {'class' : 'form-control', 'placeholder' : 'Adresse*', 'required' : 'true'} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.zipCode, {'attr' : {'class' : 'form-control', 'placeholder' : 'Code Postal*', 'required' : 'true'} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.city, {'attr' : {'class' : 'form-control', 'placeholder' : 'Ville*', 'required' : 'true'} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.deliveryAddress.country, {'attr' : {'class' : 'form-control', 'placeholder' : 'Pays*', 'required' : 'true'} }) }}
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.isBillingAddress) }} Utiliser l'adresse de livraison comme adresse de facturation
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-lg-10">
                            <div id="billing_address">
                                <h2>Adresse de Facturation</h2>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.lastName, {'attr' : {'class' : 'form-control', 'placeholder' : 'Nom du client'} }) }}
                                </div>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.firstName, {'attr' : {'class' : 'form-control', 'placeholder' : 'Prénom du cient'} }) }}
                                </div>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.company, {'attr' : {'class' : 'form-control', 'placeholder' : 'Nom entreprise si existante'} }) }}
                                </div>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.address, {'attr' : {'class' : 'form-control', 'placeholder' : 'Adresse*', 'required' : 'true'} }) }}
                                </div>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.zipCode, {'attr' : {'class' : 'form-control', 'placeholder' : 'Code Postal*', 'required' : 'true'} }) }}
                                </div>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.city, {'attr' : {'class' : 'form-control', 'placeholder' : 'Ville*', 'required' : 'true'} }) }}
                                </div>
                                <div class="form-group">
                                    {{ form_widget(form.billingAddress.country, {'attr' : {'class' : 'form-control', 'placeholder' : 'Pays*', 'required' : 'true'} }) }}
                                </div>
                            </div>
                            <div class="form-group">
                                {{ form_widget(form.comment, {'attr' : {'class' : 'form-control', 'placeholder' : 'N\'hésitez pas à nous  transmettre toute information complémentaire dans cet encadré'} }) }}
                            </div>
                            <button class="btn btn-sm btn-primary" type="submit">
                                <strong>Enregistrer</strong>
                            </button>
                        </div>
                    </div>
                    {{ form_rest(form) }}
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% block javascripts %}
    <script>
        $(document).ready(function() {
            checkIsBillingAddress();
            $('#form_isBillingAddress').click(function() {
                checkIsBillingAddress();
            });
        });
        function checkIsBillingAddress()
        {
            if ($('#form_isBillingAddress').is(':checked')) {
                $('#billing_address').addClass('hidden');
                $('#billing_address input').each(function() {
                   $(this).attr('mapped', false);
                    $(this).attr('required', false);
                });
            }
            else {
                $('#billing_address').removeClass('hidden');
                $('#billing_address input').each(function() {
                    $(this).removeAttr('mapped');
                    if ($(this).attr('id') != 'form_billingAddress_company') {
                        $(this).attr('required', true);
                    }
                });
            }
        }
    </script>
{% endblock %}
